//
// Created by ash on 24.02.24.
//
#include "escape_chars.h"

namespace __ESCAPE_CHARS_ {
    std::map<std::string, char> esc{
            {"\\a",   '\a'},
            {"\\b",   '\b'},
            {"\\f",   '\f'},
            {"\\n",   '\n'},
            {"\\r",   '\r'},
            {"\\t",   '\t'},
            {"\\v",   '\v'},
            {"\\'",   '\''},
            {"\\\"",  '\"'},
            {"\\\\",  '\\'},
            {"\\?",   '\?'},
            {"\\0",   '\0'},
            {"\\1",   '\1'},
            {"\\2",   '\2'},
            {"\\3",   '\3'},
            {"\\4",   '\4'},
            {"\\5",   '\5'},
            {"\\6",   '\6'},
            {"\\7",   '\7'},
            {"\\00",  '\00'},
            {"\\01",  '\01'},
            {"\\02",  '\02'},
            {"\\03",  '\03'},
            {"\\04",  '\04'},
            {"\\05",  '\05'},
            {"\\06",  '\06'},
            {"\\07",  '\07'},
            {"\\10",  '\10'},
            {"\\11",  '\11'},
            {"\\12",  '\12'},
            {"\\13",  '\13'},
            {"\\14",  '\14'},
            {"\\15",  '\15'},
            {"\\16",  '\16'},
            {"\\17",  '\17'},
            {"\\20",  '\20'},
            {"\\21",  '\21'},
            {"\\22",  '\22'},
            {"\\23",  '\23'},
            {"\\24",  '\24'},
            {"\\25",  '\25'},
            {"\\26",  '\26'},
            {"\\27",  '\27'},
            {"\\30",  '\30'},
            {"\\31",  '\31'},
            {"\\32",  '\32'},
            {"\\33",  '\33'},
            {"\\34",  '\34'},
            {"\\35",  '\35'},
            {"\\36",  '\36'},
            {"\\37",  '\37'},
            {"\\40",  '\40'},
            {"\\41",  '\41'},
            {"\\42",  '\42'},
            {"\\43",  '\43'},
            {"\\44",  '\44'},
            {"\\45",  '\45'},
            {"\\46",  '\46'},
            {"\\47",  '\47'},
            {"\\50",  '\50'},
            {"\\51",  '\51'},
            {"\\52",  '\52'},
            {"\\53",  '\53'},
            {"\\54",  '\54'},
            {"\\55",  '\55'},
            {"\\56",  '\56'},
            {"\\57",  '\57'},
            {"\\60",  '\60'},
            {"\\61",  '\61'},
            {"\\62",  '\62'},
            {"\\63",  '\63'},
            {"\\64",  '\64'},
            {"\\65",  '\65'},
            {"\\66",  '\66'},
            {"\\67",  '\67'},
            {"\\70",  '\70'},
            {"\\71",  '\71'},
            {"\\72",  '\72'},
            {"\\73",  '\73'},
            {"\\74",  '\74'},
            {"\\75",  '\75'},
            {"\\76",  '\76'},
            {"\\77",  '\77'},
            {"\\000", '\000'},
            {"\\001", '\001'},
            {"\\002", '\002'},
            {"\\003", '\003'},
            {"\\004", '\004'},
            {"\\005", '\005'},
            {"\\006", '\006'},
            {"\\007", '\007'},
            {"\\010", '\010'},
            {"\\011", '\011'},
            {"\\012", '\012'},
            {"\\013", '\013'},
            {"\\014", '\014'},
            {"\\015", '\015'},
            {"\\016", '\016'},
            {"\\017", '\017'},
            {"\\020", '\020'},
            {"\\021", '\021'},
            {"\\022", '\022'},
            {"\\023", '\023'},
            {"\\024", '\024'},
            {"\\025", '\025'},
            {"\\026", '\026'},
            {"\\027", '\027'},
            {"\\030", '\030'},
            {"\\031", '\031'},
            {"\\032", '\032'},
            {"\\033", '\033'},
            {"\\034", '\034'},
            {"\\035", '\035'},
            {"\\036", '\036'},
            {"\\037", '\037'},
            {"\\040", '\040'},
            {"\\041", '\041'},
            {"\\042", '\042'},
            {"\\043", '\043'},
            {"\\044", '\044'},
            {"\\045", '\045'},
            {"\\046", '\046'},
            {"\\047", '\047'},
            {"\\050", '\050'},
            {"\\051", '\051'},
            {"\\052", '\052'},
            {"\\053", '\053'},
            {"\\054", '\054'},
            {"\\055", '\055'},
            {"\\056", '\056'},
            {"\\057", '\057'},
            {"\\060", '\060'},
            {"\\061", '\061'},
            {"\\062", '\062'},
            {"\\063", '\063'},
            {"\\064", '\064'},
            {"\\065", '\065'},
            {"\\066", '\066'},
            {"\\067", '\067'},
            {"\\070", '\070'},
            {"\\071", '\071'},
            {"\\072", '\072'},
            {"\\073", '\073'},
            {"\\074", '\074'},
            {"\\075", '\075'},
            {"\\076", '\076'},
            {"\\077", '\077'},
            {"\\100", '\100'},
            {"\\101", '\101'},
            {"\\102", '\102'},
            {"\\103", '\103'},
            {"\\104", '\104'},
            {"\\105", '\105'},
            {"\\106", '\106'},
            {"\\107", '\107'},
            {"\\110", '\110'},
            {"\\111", '\111'},
            {"\\112", '\112'},
            {"\\113", '\113'},
            {"\\114", '\114'},
            {"\\115", '\115'},
            {"\\116", '\116'},
            {"\\117", '\117'},
            {"\\120", '\120'},
            {"\\121", '\121'},
            {"\\122", '\122'},
            {"\\123", '\123'},
            {"\\124", '\124'},
            {"\\125", '\125'},
            {"\\126", '\126'},
            {"\\127", '\127'},
            {"\\130", '\130'},
            {"\\131", '\131'},
            {"\\132", '\132'},
            {"\\133", '\133'},
            {"\\134", '\134'},
            {"\\135", '\135'},
            {"\\136", '\136'},
            {"\\137", '\137'},
            {"\\140", '\140'},
            {"\\141", '\141'},
            {"\\142", '\142'},
            {"\\143", '\143'},
            {"\\144", '\144'},
            {"\\145", '\145'},
            {"\\146", '\146'},
            {"\\147", '\147'},
            {"\\150", '\150'},
            {"\\151", '\151'},
            {"\\152", '\152'},
            {"\\153", '\153'},
            {"\\154", '\154'},
            {"\\155", '\155'},
            {"\\156", '\156'},
            {"\\157", '\157'},
            {"\\160", '\160'},
            {"\\161", '\161'},
            {"\\162", '\162'},
            {"\\163", '\163'},
            {"\\164", '\164'},
            {"\\165", '\165'},
            {"\\166", '\166'},
            {"\\167", '\167'},
            {"\\170", '\170'},
            {"\\171", '\171'},
            {"\\172", '\172'},
            {"\\173", '\173'},
            {"\\174", '\174'},
            {"\\175", '\175'},
            {"\\176", '\176'},
            {"\\177", '\177'},
            {"\\200", '\200'},
            {"\\201", '\201'},
            {"\\202", '\202'},
            {"\\203", '\203'},
            {"\\204", '\204'},
            {"\\205", '\205'},
            {"\\206", '\206'},
            {"\\207", '\207'},
            {"\\210", '\210'},
            {"\\211", '\211'},
            {"\\212", '\212'},
            {"\\213", '\213'},
            {"\\214", '\214'},
            {"\\215", '\215'},
            {"\\216", '\216'},
            {"\\217", '\217'},
            {"\\220", '\220'},
            {"\\221", '\221'},
            {"\\222", '\222'},
            {"\\223", '\223'},
            {"\\224", '\224'},
            {"\\225", '\225'},
            {"\\226", '\226'},
            {"\\227", '\227'},
            {"\\230", '\230'},
            {"\\231", '\231'},
            {"\\232", '\232'},
            {"\\233", '\233'},
            {"\\234", '\234'},
            {"\\235", '\235'},
            {"\\236", '\236'},
            {"\\237", '\237'},
            {"\\240", '\240'},
            {"\\241", '\241'},
            {"\\242", '\242'},
            {"\\243", '\243'},
            {"\\244", '\244'},
            {"\\245", '\245'},
            {"\\246", '\246'},
            {"\\247", '\247'},
            {"\\250", '\250'},
            {"\\251", '\251'},
            {"\\252", '\252'},
            {"\\253", '\253'},
            {"\\254", '\254'},
            {"\\255", '\255'},
            {"\\256", '\256'},
            {"\\257", '\257'},
            {"\\260", '\260'},
            {"\\261", '\261'},
            {"\\262", '\262'},
            {"\\263", '\263'},
            {"\\264", '\264'},
            {"\\265", '\265'},
            {"\\266", '\266'},
            {"\\267", '\267'},
            {"\\270", '\270'},
            {"\\271", '\271'},
            {"\\272", '\272'},
            {"\\273", '\273'},
            {"\\274", '\274'},
            {"\\275", '\275'},
            {"\\276", '\276'},
            {"\\277", '\277'},
            {"\\300", '\300'},
            {"\\301", '\301'},
            {"\\302", '\302'},
            {"\\303", '\303'},
            {"\\304", '\304'},
            {"\\305", '\305'},
            {"\\306", '\306'},
            {"\\307", '\307'},
            {"\\310", '\310'},
            {"\\311", '\311'},
            {"\\312", '\312'},
            {"\\313", '\313'},
            {"\\314", '\314'},
            {"\\315", '\315'},
            {"\\316", '\316'},
            {"\\317", '\317'},
            {"\\320", '\320'},
            {"\\321", '\321'},
            {"\\322", '\322'},
            {"\\323", '\323'},
            {"\\324", '\324'},
            {"\\325", '\325'},
            {"\\326", '\326'},
            {"\\327", '\327'},
            {"\\330", '\330'},
            {"\\331", '\331'},
            {"\\332", '\332'},
            {"\\333", '\333'},
            {"\\334", '\334'},
            {"\\335", '\335'},
            {"\\336", '\336'},
            {"\\337", '\337'},
            {"\\340", '\340'},
            {"\\341", '\341'},
            {"\\342", '\342'},
            {"\\343", '\343'},
            {"\\344", '\344'},
            {"\\345", '\345'},
            {"\\346", '\346'},
            {"\\347", '\347'},
            {"\\350", '\350'},
            {"\\351", '\351'},
            {"\\352", '\352'},
            {"\\353", '\353'},
            {"\\354", '\354'},
            {"\\355", '\355'},
            {"\\356", '\356'},
            {"\\357", '\357'},
            {"\\360", '\360'},
            {"\\361", '\361'},
            {"\\362", '\362'},
            {"\\363", '\363'},
            {"\\364", '\364'},
            {"\\365", '\365'},
            {"\\366", '\366'},
            {"\\367", '\367'},
            {"\\370", '\370'},
            {"\\371", '\371'},
            {"\\372", '\372'},
            {"\\373", '\373'},
            {"\\374", '\374'},
            {"\\375", '\375'},
            {"\\376", '\376'},
            {"\\377", '\377'},
            {"\\x0",  '\x0'},
            {"\\x1",  '\x1'},
            {"\\x2",  '\x2'},
            {"\\x3",  '\x3'},
            {"\\x4",  '\x4'},
            {"\\x5",  '\x5'},
            {"\\x6",  '\x6'},
            {"\\x7",  '\x7'},
            {"\\x8",  '\x8'},
            {"\\x9",  '\x9'},
            {"\\xa",  '\xa'},
            {"\\xb",  '\xb'},
            {"\\xc",  '\xc'},
            {"\\xd",  '\xd'},
            {"\\xe",  '\xe'},
            {"\\xf",  '\xf'},
            {"\\x00", '\x00'},
            {"\\x01", '\x01'},
            {"\\x02", '\x02'},
            {"\\x03", '\x03'},
            {"\\x04", '\x04'},
            {"\\x05", '\x05'},
            {"\\x06", '\x06'},
            {"\\x07", '\x07'},
            {"\\x08", '\x08'},
            {"\\x09", '\x09'},
            {"\\x0a", '\x0a'},
            {"\\x0b", '\x0b'},
            {"\\x0c", '\x0c'},
            {"\\x0d", '\x0d'},
            {"\\x0e", '\x0e'},
            {"\\x0f", '\x0f'},
            {"\\x10", '\x10'},
            {"\\x11", '\x11'},
            {"\\x12", '\x12'},
            {"\\x13", '\x13'},
            {"\\x14", '\x14'},
            {"\\x15", '\x15'},
            {"\\x16", '\x16'},
            {"\\x17", '\x17'},
            {"\\x18", '\x18'},
            {"\\x19", '\x19'},
            {"\\x1a", '\x1a'},
            {"\\x1b", '\x1b'},
            {"\\x1c", '\x1c'},
            {"\\x1d", '\x1d'},
            {"\\x1e", '\x1e'},
            {"\\x1f", '\x1f'},
            {"\\x20", '\x20'},
            {"\\x21", '\x21'},
            {"\\x22", '\x22'},
            {"\\x23", '\x23'},
            {"\\x24", '\x24'},
            {"\\x25", '\x25'},
            {"\\x26", '\x26'},
            {"\\x27", '\x27'},
            {"\\x28", '\x28'},
            {"\\x29", '\x29'},
            {"\\x2a", '\x2a'},
            {"\\x2b", '\x2b'},
            {"\\x2c", '\x2c'},
            {"\\x2d", '\x2d'},
            {"\\x2e", '\x2e'},
            {"\\x2f", '\x2f'},
            {"\\x30", '\x30'},
            {"\\x31", '\x31'},
            {"\\x32", '\x32'},
            {"\\x33", '\x33'},
            {"\\x34", '\x34'},
            {"\\x35", '\x35'},
            {"\\x36", '\x36'},
            {"\\x37", '\x37'},
            {"\\x38", '\x38'},
            {"\\x39", '\x39'},
            {"\\x3a", '\x3a'},
            {"\\x3b", '\x3b'},
            {"\\x3c", '\x3c'},
            {"\\x3d", '\x3d'},
            {"\\x3e", '\x3e'},
            {"\\x3f", '\x3f'},
            {"\\x40", '\x40'},
            {"\\x41", '\x41'},
            {"\\x42", '\x42'},
            {"\\x43", '\x43'},
            {"\\x44", '\x44'},
            {"\\x45", '\x45'},
            {"\\x46", '\x46'},
            {"\\x47", '\x47'},
            {"\\x48", '\x48'},
            {"\\x49", '\x49'},
            {"\\x4a", '\x4a'},
            {"\\x4b", '\x4b'},
            {"\\x4c", '\x4c'},
            {"\\x4d", '\x4d'},
            {"\\x4e", '\x4e'},
            {"\\x4f", '\x4f'},
            {"\\x50", '\x50'},
            {"\\x51", '\x51'},
            {"\\x52", '\x52'},
            {"\\x53", '\x53'},
            {"\\x54", '\x54'},
            {"\\x55", '\x55'},
            {"\\x56", '\x56'},
            {"\\x57", '\x57'},
            {"\\x58", '\x58'},
            {"\\x59", '\x59'},
            {"\\x5a", '\x5a'},
            {"\\x5b", '\x5b'},
            {"\\x5c", '\x5c'},
            {"\\x5d", '\x5d'},
            {"\\x5e", '\x5e'},
            {"\\x5f", '\x5f'},
            {"\\x60", '\x60'},
            {"\\x61", '\x61'},
            {"\\x62", '\x62'},
            {"\\x63", '\x63'},
            {"\\x64", '\x64'},
            {"\\x65", '\x65'},
            {"\\x66", '\x66'},
            {"\\x67", '\x67'},
            {"\\x68", '\x68'},
            {"\\x69", '\x69'},
            {"\\x6a", '\x6a'},
            {"\\x6b", '\x6b'},
            {"\\x6c", '\x6c'},
            {"\\x6d", '\x6d'},
            {"\\x6e", '\x6e'},
            {"\\x6f", '\x6f'},
            {"\\x70", '\x70'},
            {"\\x71", '\x71'},
            {"\\x72", '\x72'},
            {"\\x73", '\x73'},
            {"\\x74", '\x74'},
            {"\\x75", '\x75'},
            {"\\x76", '\x76'},
            {"\\x77", '\x77'},
            {"\\x78", '\x78'},
            {"\\x79", '\x79'},
            {"\\x7a", '\x7a'},
            {"\\x7b", '\x7b'},
            {"\\x7c", '\x7c'},
            {"\\x7d", '\x7d'},
            {"\\x7e", '\x7e'},
            {"\\x7f", '\x7f'},
            {"\\x80", '\x80'},
            {"\\x81", '\x81'},
            {"\\x82", '\x82'},
            {"\\x83", '\x83'},
            {"\\x84", '\x84'},
            {"\\x85", '\x85'},
            {"\\x86", '\x86'},
            {"\\x87", '\x87'},
            {"\\x88", '\x88'},
            {"\\x89", '\x89'},
            {"\\x8a", '\x8a'},
            {"\\x8b", '\x8b'},
            {"\\x8c", '\x8c'},
            {"\\x8d", '\x8d'},
            {"\\x8e", '\x8e'},
            {"\\x8f", '\x8f'},
            {"\\x90", '\x90'},
            {"\\x91", '\x91'},
            {"\\x92", '\x92'},
            {"\\x93", '\x93'},
            {"\\x94", '\x94'},
            {"\\x95", '\x95'},
            {"\\x96", '\x96'},
            {"\\x97", '\x97'},
            {"\\x98", '\x98'},
            {"\\x99", '\x99'},
            {"\\x9a", '\x9a'},
            {"\\x9b", '\x9b'},
            {"\\x9c", '\x9c'},
            {"\\x9d", '\x9d'},
            {"\\x9e", '\x9e'},
            {"\\x9f", '\x9f'},
            {"\\xa0", '\xa0'},
            {"\\xa1", '\xa1'},
            {"\\xa2", '\xa2'},
            {"\\xa3", '\xa3'},
            {"\\xa4", '\xa4'},
            {"\\xa5", '\xa5'},
            {"\\xa6", '\xa6'},
            {"\\xa7", '\xa7'},
            {"\\xa8", '\xa8'},
            {"\\xa9", '\xa9'},
            {"\\xaa", '\xaa'},
            {"\\xab", '\xab'},
            {"\\xac", '\xac'},
            {"\\xad", '\xad'},
            {"\\xae", '\xae'},
            {"\\xaf", '\xaf'},
            {"\\xb0", '\xb0'},
            {"\\xb1", '\xb1'},
            {"\\xb2", '\xb2'},
            {"\\xb3", '\xb3'},
            {"\\xb4", '\xb4'},
            {"\\xb5", '\xb5'},
            {"\\xb6", '\xb6'},
            {"\\xb7", '\xb7'},
            {"\\xb8", '\xb8'},
            {"\\xb9", '\xb9'},
            {"\\xba", '\xba'},
            {"\\xbb", '\xbb'},
            {"\\xbc", '\xbc'},
            {"\\xbd", '\xbd'},
            {"\\xbe", '\xbe'},
            {"\\xbf", '\xbf'},
            {"\\xc0", '\xc0'},
            {"\\xc1", '\xc1'},
            {"\\xc2", '\xc2'},
            {"\\xc3", '\xc3'},
            {"\\xc4", '\xc4'},
            {"\\xc5", '\xc5'},
            {"\\xc6", '\xc6'},
            {"\\xc7", '\xc7'},
            {"\\xc8", '\xc8'},
            {"\\xc9", '\xc9'},
            {"\\xca", '\xca'},
            {"\\xcb", '\xcb'},
            {"\\xcc", '\xcc'},
            {"\\xcd", '\xcd'},
            {"\\xce", '\xce'},
            {"\\xcf", '\xcf'},
            {"\\xd0", '\xd0'},
            {"\\xd1", '\xd1'},
            {"\\xd2", '\xd2'},
            {"\\xd3", '\xd3'},
            {"\\xd4", '\xd4'},
            {"\\xd5", '\xd5'},
            {"\\xd6", '\xd6'},
            {"\\xd7", '\xd7'},
            {"\\xd8", '\xd8'},
            {"\\xd9", '\xd9'},
            {"\\xda", '\xda'},
            {"\\xdb", '\xdb'},
            {"\\xdc", '\xdc'},
            {"\\xdd", '\xdd'},
            {"\\xde", '\xde'},
            {"\\xdf", '\xdf'},
            {"\\xe0", '\xe0'},
            {"\\xe1", '\xe1'},
            {"\\xe2", '\xe2'},
            {"\\xe3", '\xe3'},
            {"\\xe4", '\xe4'},
            {"\\xe5", '\xe5'},
            {"\\xe6", '\xe6'},
            {"\\xe7", '\xe7'},
            {"\\xe8", '\xe8'},
            {"\\xe9", '\xe9'},
            {"\\xea", '\xea'},
            {"\\xeb", '\xeb'},
            {"\\xec", '\xec'},
            {"\\xed", '\xed'},
            {"\\xee", '\xee'},
            {"\\xef", '\xef'},
            {"\\xf0", '\xf0'},
            {"\\xf1", '\xf1'},
            {"\\xf2", '\xf2'},
            {"\\xf3", '\xf3'},
            {"\\xf4", '\xf4'},
            {"\\xf5", '\xf5'},
            {"\\xf6", '\xf6'},
            {"\\xf7", '\xf7'},
            {"\\xf8", '\xf8'},
            {"\\xf9", '\xf9'},
            {"\\xfa", '\xfa'},
            {"\\xfb", '\xfb'},
            {"\\xfc", '\xfc'},
            {"\\xfd", '\xfd'},
            {"\\xfe", '\xfe'},
            {"\\xff", '\xff'}};
}

int get_esc_char(Reader &rd, char &ans) {
    if (char t = rd.peek();t == '\\') {

        std::string str = "\\";
        rd.ignore();
        if (rd.peek() == 'x') {
            str.push_back('x');
            rd.ignore();
        }
        for (; __ESCAPE_CHARS_::esc.contains(str + rd.peek()); rd.ignore()) {
            str += rd.peek();
        }

        if (str.size() == 1){
            if(rd.peek()=='\n'||rd.peek()=='\0')return 2;
            return 1;
        }
        if((str.size()==2&&str.back()=='x')){
            if(rd.peek()=='\n'||rd.peek()=='\0')return 2;
            return 4;
        }
        ans = __ESCAPE_CHARS_::esc[str];
        return 0;
    } else if (t == '\n'||t=='\0') {
        return 2;
    } else if (t == '"') {
        rd.ignore();
        return -1;
    }else{
        ans = t;
        rd.ignore();
        return 0;
    }

}
